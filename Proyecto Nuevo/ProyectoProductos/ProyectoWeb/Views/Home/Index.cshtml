@model ProyectoWeb.ViewModel.HomeViewModel.IndexViewModel
@{
    ViewBag.Title = "Home Page";
}
@section Slider {
    <div class="hidden-xs">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="~/Imagenes/Carousel/Carousel_IMG1.jpg" alt="Chania" style="width:100%; height:100%;">
                    @*<div class="carousel-caption">
                        <h3>Imagen 1</h3>
                        <p>Descripción Imagen 1.</p>
                    </div>*@
                </div>

                <div class="item">
                    <img src="~/Imagenes/Carousel/Carousel_IMG2.jpg" alt="Chania" style="width:100%; height:100%;">
                    @*<div class="carousel-caption">
                        <h3>Imagen 2</h3>
                        <p>Descripción Imagen 2.</p>
                    </div>*@
                </div>

                <div class="item">
                    <img src="~/Imagenes/Carousel/Carousel_IMG3.jpg" alt="Flower" style="width:100%; height:100%;">
                    @*<div class="carousel-caption">
                        <h3>Imagen 3</h3>
                        <p>Descripción Imagen 3.</p>
                    </div>*@
                </div>

                <div class="item">
                    <img src="~/Imagenes/Carousel/Carousel_IMG4.jpg" alt="Flower" style="width:100%; height:100%;">
                    @*<div class="carousel-caption">
                        <h3>Imagen 4</h3>
                        <p>Descripción Imagen 4.</p>
                    </div>*@
                </div>
            </div>

            <!-- Left and right controls -->
            <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <br>
}
<script src="~/Scripts/agregarArticulo.js"></script>

<div class="row"> 
    <div class="hidden-xs hidden-sm hidden-md hidden-lg">
        @{//IMPORTANTE VER QUE ESTO SE PODRIA HACER AGREGANDO UN ATRIBUTO DESTACADO A LA CATEGORIA
            var guia = 0;
            var contador = 0;
            var cantidad=Model.Categorias.Count;
            if (cantidad>0 && cantidad % 2 == 1) { guia = 1; }
            foreach (var c in Model.Categorias)
            {
                if (cantidad > 0)
                {
                    if (guia == 0)
                    {
                        <div class="col-md-12 pull-left" style="padding:10px">
                            <div class="sombra fade" style="border: thin solid whitesmoke;border-left:none;border-right:none;background-size: 15%;background-image: url(@("/Imagenes/Categorias/" + c.Img)); background-repeat: no-repeat;background-position: 30% -40px;">
                                <a href="~/Catalogo/ListaArticulos/@c.Id?Nombre=@c.Nombre" style="color:#000000;text-decoration:none">
                                    <div style="height:50px;text-align:center;">
                                        <h3>@c.Nombre</h3>
                                    </div>
                                </a>
                            </div>
                        </div>
                        guia = 1;
                    }
                    else {
                        if (contador == 1)
                        {
                            <div class="col-md-6 pull-left" style="padding:10px">
                                <div class="sombra fade" style="border: thin solid whitesmoke;border-right:none;background-size: 25%;background-image: url(@("/Imagenes/Categorias/" + c.Img)); background-repeat: no-repeat;background-position: 10% 5px;">
                                    <a href="~/Catalogo/ListaArticulos/@c.Id?Nombre=@c.Nombre" style="color:#000000;text-decoration:none">
                                        <div style="height:50px;text-align:center;">
                                            <center><h3>@c.Nombre</h3></center>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        }
                        else {
                            <div class="col-md-6 pull-left" style="padding:10px">
                                <div class="sombra fade" style="border: thin solid whitesmoke;border-left:none;background-size: 25%;background-image: url(@("/Imagenes/Categorias/" + c.Img)); background-repeat: no-repeat;background-position: 10% -20px;">
                                    <a href="~/Catalogo/ListaArticulos/@c.Id?Nombre=@c.Nombre" style="color:#000000;text-decoration:none">
                                        <div style="height:50px;text-align:center;">
                                            <center><h3>@c.Nombre</h3></center>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        }

                        contador++;
                        if (contador == 2) { guia = 0; contador = 0; }
                    }
                }
            }            
        }
        <div class="clearfix"></div>
        <a href="~/Catalogo/ListaCategorias" class="pull-right"><span class="glyphicon glyphicon-eye-open"></span> Ver más</a>
    </div>

    <br>
    
    <div>
        <h2 class="text-center">Artículos Destacados</h2>
        <br>
        <br>
        @foreach (var c in Model.ArticulosDestacados)
        {
            if (c.Disponible)
            {
                var s1 = "unidades" + c.Id;

                <div class="col-xs-12 col-sm-6 col-md-3" style="padding-bottom:20px;">
                    <div class="thumbnail sombra">
                        <a href="~/Catalogo/DetalleArticulo/@c.Id">
                            <div align="center" style="padding:18px;width:100%; height:100%;">
                                <img src=@("/Imagenes/Articulos/" + c.Imagenes.ElementAt(0).Img) class="img" alt="Imagen de Prueba" style="width:70%; height:70%;">
                            </div>
                        </a>     
                        <div class="caption">
                            @{
                                List<string> color = new List<string>();
                                List<string> material = new List<string>();
                                string strcol = "";
                                string strMat = "";
                                //int cont = 0;
                                foreach (ET.Filtro f in c.Filtros)
                                {
                                    if (f.Color)
                                    {
                                        color.Add(f.Nombre);
                                    }
                                    else {
                                        material.Add(f.Nombre);
                                    }
                                }
                                for(int i=0;i<color.Count;i++) {
                                    if (i != color.Count - 1)
                                    {
                                        strcol += color.ElementAt(i) + " | ";
                                    }
                                    else {
                                        strcol += color.ElementAt(i);
                                    }
                                }
                                for (int i = 0; i < material.Count; i++)
                                {
                                    if (i != material.Count - 1)
                                    {
                                        strMat += material.ElementAt(i) + " | ";
                                    }
                                    else {
                                        strMat += material.ElementAt(i);
                                    }
                                }
                                if (material.Count == 0) { strMat = "Material: Sin descripción"; }
                                if (color.Count == 0) { strcol = "Color: Sin descripción"; }
                                <div style="font-size:smaller"><small>@strMat</small></div>
                                <div style="font-size:smaller"><small>@strcol</small></div>
                            }
                            <div style="font-size:medium">@c.Codigo</div>
                            <div style="font-size:x-large">@c.Nombre</div>
                                                                                                   
                            @if (Session["TipoUsuario"] != null)
                            {
                                @*if (c.Stock == 0)
                                {
                                    <h4>Stock: <span class="label label-warning">Consultar</span></h4>
                                }
                                else {*@
                                if (Session["TipoUsuario"].Equals("Administrador"))
                                {
                                    <div style="font-size:medium">Stock: @c.Stock</div>
                                }

                                //}

                                <div style="font-size:large">Precio: $ @c.Precio c/u</div>
                                <p>                                   
                                    <div class="input-group" style="width:180px">
                                        <input type="number" class="form-control" value="1" id="@s1" onchange="verificarCantidad(this)">
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" OnClick="agregarCarrito(this)" id="@c.Id"  data-toggle="popover" data-trigger="focus" data-content="Agregado a Mi Carrito">Agregar <span class="glyphicon glyphicon-shopping-cart"></span></button>
                                        </span>
                                    </div>                                 
                                    <div class="clearfix"></div>
                                </p>
                            }                            
                        </div>
                    </div>
                </div>
            }
        }
        <script>
            function verificarCantidad(event) {
                if (parseInt(event.value) <= 0) {
                    event.value=1;
                    //alert("La cantidad no puede ser menor a 1!");
                }
            }
        </script>
        <style>
            .img:hover {
                -webkit-transform: scale(1.1);
                -moz-transform: scale(1.1);
                -o-transform: scale(1.1);
                -ms-transform: scale(1.1);
                transform: scale(1.1);
                -webkit-transition: all 0.5s ease;
                -moz-transition: all 0.5s ease;
                -o-transition: all 0.5s ease;
            }
            
            .fade
            {
                    opacity:0.75;
            }
            .fade:hover
            {
                    opacity:1.0;
            }
        </style>
    </div>
</div>
